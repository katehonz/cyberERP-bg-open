# 📚 Документация на Cyber ERP

> Добре дошли в документацията на **Cyber ERP** - модерна ERP система на български език

## 🎯 Бърза навигация

| Роля | Къде да започнете |
|------|------------------|
| 👤 **Нов потребител** | [Бърз старт](#бърз-старт) |
| 👨‍💻 **Разработчик** | [За разработчици](#за-разработчици) |
| 🏢 **Бизнес потребител** | [Бизнес функционалности](#бизнес-функционалности) |
| 🏗️ **Архитект** | [Архитектура](#архитектура) |

---

## 📖 Съдържание

### 🚀 Първи стъпки

- [**Бърз старт**](QUICK_START_BG.md) - Инсталация и настройка за 5 минути
- [**Настройка на номенклатури**](SETUP_NOMENCLATURES.md) - Начална конфигурация
- [**Настройка на достъп**](SETUP_CREDENTIALS.md) - Потребители и роли

#### В главната директория

- [**Първи стъпки**](../GETTING_STARTED.md) - Ръководство за нови потребители
- [**Cheatsheet**](../CHEATSHEET.md) - Бързи команди и patterns
- [**Troubleshooting**](../TROUBLESHOOTING.md) - Решения на проблеми
- [**Допринасяне**](../CONTRIBUTING.md) - Как да допринесете към проекта

### 🏗️ Архитектура и дизайн

| Документ | Описание |
|----------|----------|
| [Архитектура](ARCHITECTURE_BG.md) | Модулен монолит, Phoenix Umbrella, дизайн решения |
| [Модулна диаграма](MODULES_DIAGRAM_BG.md) | Визуализация на всички модули и връзките между тях |
| [Multi-tenancy](MULTI-TENANT.md) | Изолация на данни, управление на множество фирми |
| [Кеширане](CACHE_QUICKSTART.md) | ETS кеш система за производителност |

### 💼 Бизнес функционалности

#### Счетоводство и финанси
| Документ | Описание |
|----------|----------|
| [Счетоводен модул](ACCOUNTING_REFACTORING.md) | Дневници, сметкоплан, счетоводни записи |
| [ДДС система](VAT-docs.md) | ДДС декларации, дневници, NAP файлове |
| [Видове документи](VAT_DOCUMENT_TYPES.md) | Пълна номенклатура по ППЗДДС 2025 |
| [Начални салда](OPENING_BALANCES.md) | Начално внасяне на данни |
| [Дълготрайни активи](FIXED_ASSETS_MODULE.md) | ДМА модул - амортизация, справки |
| [Номерация](DOCUMENT_NUMBERING.md) | Автоматична номерация на документи |
| [Ценови листи](PRICE_LISTS.md) | Управление на цени и отстъпки |

#### Склад и логистика
| Документ | Описание |
|----------|----------|
| [Складов модул](../../apps/cyber_core/lib/cyber_core/inventory/README.md) | Продукти, складове, наличности |
| [Производство](MANUFACTURING_TECH_CARDS.md) | Технологични карти, рецептури |

#### Продажби и покупки
| Документ | Описание |
|----------|----------|
| [API документация](API_DOCS_BG.md) | REST API за продажби и покупки |
| [Фиксирани активи API](API_FIXED_ASSETS.md) | API за ДМА операции |

#### Банки и плащания
| Документ | Описание |
|----------|----------|
| [Банков профили](BANK_PROFILES.md) | Настройка на банки, импорт на извлечения |

### 🔌 Интеграции

| Интеграция | Документ | Статус |
|------------|----------|--------|
| **AI обработка** | [AI Invoice Processing](AI_INVOICE_PROCESSING.md) | ✅ |
| **Azure Form Recognizer** | [Azure Setup](AZURE_FORM_RECOGNIZER_SETUP.md) | ✅ |
| **SAF-T** | [SAF-T docs](SAFT-docs.md) | 🚧 |
| [SAF-T Mapping](SAFT_MAPPING.md) | Данъчен стандарт | 🚧 |
| [SAF-T Implementation](SAFT_IMPLEMENTATION_SUMMARY.md) | Справки | 🚧 |
| [SAF-T ДМА](SAFT_FIXED_ASSETS.md) | Отчети | 🚧 |
| [SAF-T Банки](SAFT_BANK_IMPORT_PLAN.md) | Планиране | 📋 |

### 👤 Потребителски интерфейс и достъп

| Документ | Описание |
|----------|----------|
| [Роли и права](USER_ROLES_AND_PERMISSIONS.md) | RBAC система, permissions UI |
| [Tenant Selector](TENANT_SELECTOR.md) | Превключване между фирми |
| [Frontend интеграция](FRONTEND_INTEGRATION.md) | React + LiveView |

### 🔧 За разработчици

#### Развитие и поддръжка
| Документ | Описание |
|----------|----------|
| [API документация](API_DOCS_BG.md) | REST API endpoints |
| [Frontend интеграция](FRONTEND_INTEGRATION.md) | React компоненти и hooks |
| [Миграции](MIGRATION_SUMMARY.md) | История на базата данни |
| [Статус на имплементацията](IMPLEMENTATION-STATUS.md) | Проверка на завършеност |

#### Планиране
| Документ | Описание |
|----------|----------|
| [План за модули](MODULES_PLAN.md) | Roadmap за всички модули |
| [Проект статус](PROJECT_STATUS_BG.md) | Текущ прогрес и метрики |
| [Резюме](SUMMARY_BG.md) | Кратко обобщение на проекта |

---

## 🚀 Бърз старт

### 1. Инсталирай зависимостите

```bash
cd /path/to/cyberERP-open-bg
mix deps.get
```

### 2. Настрой базата данни

```bash
mix ecto.setup
```

Това ще създаде база, миграции и примерни данни.

### 3. Стартирай приложението

```bash
./start.sh
# или
mix phx.server
```

### 4. Влез в системата

Отвори http://localhost:4000 и влез с:

| Роля | Email | Парола |
|------|-------|--------|
| Superadmin | `superadmin@example.com` | `password123` |

---

## 👨‍💻 За разработчици

### Структура на проекта

```
cyberERP-open-bg/
├── apps/
│   ├── cyber_core/      # Бизнес логика (contexts, schemas)
│   └── cyber_web/       # Web интерфейс (LiveView, controllers)
├── config/              # Конфигурация
├── docs/                # 📚 Документация
├── priv/                # Private files (seeds, migrations)
└── rel/                 # Release конфигурация
```

### Полезни команди

```bash
# База данни
mix ecto.migrate    # Прилага миграции
mix ecto.rollback  # Отменя последната миграция
mix ecto.reset     # Нулира базата

# Генериране
mix phx.gen.context Core Product products name:string
mix phx.gen.live Inventory Product products name:string

# Тестове
mix test
mix test --cover

# Разработка
iex -S mix          # Интерактивна конзола
mix format          # Форматиране на код
```

### Ключови концепции

- **Umbrella приложението** - два independent apps (core + web)
- **Contexts** - изолирана бизнес логика по домейни
- **LiveView** - server-side rendered UI с real-time updates
- **Multi-tenancy** - изолация на данни per tenant

---

## 💼 Бизнес функционалности

### ✅ Завършени модули (100%)

| Модул | Описание | URL |
|-------|----------|-----|
| **ДДС** | ДДС декларации, NAP файлове, дневници | `/vat/return` |
| **Multi-tenancy** | Управление на множество фирми | `/tenants` |
| **Настройки** | Фирмени данни, банкови сметки | `/settings` |
| **AI обработка** | Автоматично извличане от PDF фактури | `/documents` |

### 🚧 В разработка (80%)

| Модул | Прогрес |
|-------|---------|
| **SAF-T** | Header ✅, MasterFiles ✅, GeneralLedger ⏳, SourceDocuments ⏳ |

### 📋 Планирани модули

- HR (Човешки ресурси)
- POS (Каса)
- Planning (Планиране)
- Reporting (Отчети)

---

## 🏗️ Архитектура

### Модулен монолит

Cyber ERP използва архитектурата **Modular Monolith**:

```
┌─────────────────────────────────────────────────────────────┐
│                  Cyber ERP (Umbrella)                        │
├─────────────────────────────────────────────────────────────┤
│  Accounting  │  Sales  │  Purchase  │  Inventory  │  Bank  │
├─────────────────────────────────────────────────────────────┤
│              Shared Kernel (Repo, PubSub, Cache)             │
├─────────────────────────────────────────────────────────────┤
│                    PostgreSQL Database                        │
└─────────────────────────────────────────────────────────────┘
```

**Предимства:**
- ✅ ACID транзакции между модули
- ✅ Лесен deployment
- ✅ Нисък overhead
- ✅ Ясен път към микросервизи

**Технологии:**
- **Backend:** Elixir 1.16+, Phoenix 1.7+
- **Database:** PostgreSQL 14+
- **Frontend:** LiveView + React + TailwindCSS

Повече информация: [Архитектура](ARCHITECTURE_BG.md)

---

## 📊 Статус на проекта

**Версия:** 0.1.0
**Дата:** Декември 2025
**Статус:** 🟡 В разработка

### Прогрес

```
✅ Архитектура и дизайн:  100% ████████████████
✅ База данни:             100% ████████████████
✅ API ендпоинти:           90% ███████████████░
✅ Бизнес логика:           85% ██████████████░░
🚧 LiveView интерфейси:     50% █████████░░░░░░
⏸️ Тестове:                30% █████░░░░░░░░░
📋 Интеграции (SAF-T):      70% ████████████░░░
```

### Метрики

| Категория | Брой |
|-----------|------|
| Миграции | 14+ |
| Схеми (Ecto) | 19+ |
| Контексти | 7 |
| API контролери | 6+ |
| Документация | 30+ файла |

---

## 🆘 Поддръжка и помощ

### Често срещани проблеми

**Проблем:** Port 4000 е зает
```bash
lsof -ti:4000 | xargs kill -9
```

**Проблем:** Database connection error
```bash
sudo systemctl restart postgresql
mix ecto.reset
```

**Проблем:** Компилационни грешки
```bash
mix clean
mix deps.get --all
mix compile
```

### Контакти

- 📧 За въпроси относно документацията: виж GitHub issues
- 📖 За техническа помощ: [QUICK_START_BG.md](QUICK_START_BG.md) - раздел "Troubleshooting"

---

## 📝 Допринасяне към документацията

При добавяне на нови документи, следвайте следните правила:

1. **Език:** Всички документи на български
2. **Структура:** Използвайте clear headings, списъци, таблици
3. **Примери:** Добавяйте code examples за всяка функционалност
4. **Съдържание:** Включвайте: описание, инструкция, примери, troubleshooting
5. **Имена на файлове:** Използвайте `UPPER_CASE_WITH_UNDERSCORES.md`

### Шаблон за нов документ

```markdown
# Заглавие

## Описание
Кратко описание на функционалността.

## Предварителни изисквания
- Изискване 1
- Изискване 2

## Инструкция
### Стъпка 1
...

### Стъпка 2
...

## Примери
```elixir
code example
```

## Възможни проблеми
| Проблем | Решение |
|---------|---------|
| ... | ... |
```

---

## 📄 Лиценз

Proprietary - Всички права запазени.

---

**Made with ❤️ for the Bulgarian market 🇧🇬**
