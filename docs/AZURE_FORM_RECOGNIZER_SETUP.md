# Azure Form Recognizer –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

## –û–±—â –ü—Ä–µ–≥–ª–µ–¥

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è—Ç–∞ —Å Azure Form Recognizer –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–∞ –∏–∑–≤–ª–∏—á–∞–Ω–µ—Ç–æ –Ω–∞ –¥–∞–Ω–Ω–∏ –æ—Ç —Ñ–∞–∫—Ç—É—Ä–∏ –¥–∏—Ä–µ–∫—Ç–Ω–æ –æ—Ç –±—Ä–∞—É–∑—ä—Ä–∞ –∫—ä–º Azure AI –∏ —Å—ä–∑–¥–∞–≤–∞ –∑–∞–ø–∏—Å–∏ –≤ ERP —Å–∏—Å—Ç–µ–º–∞—Ç–∞.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Browser    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ ERP System   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ Azure Form          ‚îÇ
‚îÇ (PDF Upload)‚îÇ     ‚îÇ (LiveView)   ‚îÇ     ‚îÇ Recognizer API      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ                       ‚îÇ
                           ‚îÇ     JSON Response     ‚îÇ
                           ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚ñº
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ ExtractedInvoice ‚îÇ
                    ‚îÇ (Pending Review) ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚ñº
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ User Approval‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚ñº
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ Final Invoice‚îÇ
                    ‚îÇ (Sales/      ‚îÇ
                    ‚îÇ  Purchase)   ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Workflow:**
1. –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –∫–∞—á–≤–∞ PDF —Ñ–∞–∫—Ç—É—Ä–∞ –ø—Ä–µ–∑ –±—Ä–∞—É–∑—ä—Ä–∞
2. ERP —Å–∏—Å—Ç–µ–º–∞—Ç–∞ –∏–∑–ø—Ä–∞—â–∞ PDF –¥–∏—Ä–µ–∫—Ç–Ω–æ –∫—ä–º Azure Form Recognizer
3. Azure –∏–∑–≤–ª–∏—á–∞ –¥–∞–Ω–Ω–∏—Ç–µ –∏ –≤—Ä—ä—â–∞ JSON —Ä–µ–∑—É–ª—Ç–∞—Ç
4. –î–∞–Ω–Ω–∏—Ç–µ —Å–µ –∑–∞–ø–∏—Å–≤–∞—Ç –∫–∞—Ç–æ ExtractedInvoice —Å—ä—Å —Å—Ç–∞—Ç—É—Å "pending_review"
5. –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –ø—Ä–µ–≥–ª–µ–¥–∞ –∏ –æ–¥–æ–±—Ä—è–≤–∞/–æ—Ç—Ö–≤—ä—Ä–ª—è
6. –°–ª–µ–¥ –æ–¥–æ–±—Ä–µ–Ω–∏–µ —Å–µ —Å—ä–∑–¥–∞–≤–∞ —Ñ–∏–Ω–∞–ª–Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∞

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### 1. –ë–∞–∑–∞ –î–∞–Ω–Ω–∏

–î–≤–µ –Ω–æ–≤–∏ —Ç–∞–±–ª–∏—Ü–∏:

- **`document_uploads`** - –ö–∞—á–µ–Ω–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞
- **`extracted_invoices`** - –ò–∑–≤–ª–µ—á–µ–Ω–∏ –¥–∞–Ω–Ω–∏, –æ—á–∞–∫–≤–∞—â–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–µ

### 2. –ú–æ–¥—É–ª–∏

```
apps/cyber_core/lib/cyber_core/document_processing/
‚îú‚îÄ‚îÄ document_upload.ex          # Ecto —Å—Ö–µ–º–∞ –∑–∞ –∫–∞—á–µ–Ω–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏
‚îú‚îÄ‚îÄ extracted_invoice.ex        # Ecto —Å—Ö–µ–º–∞ –∑–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏ —Ñ–∞–∫—Ç—É—Ä–∏
‚îú‚îÄ‚îÄ azure_form_recognizer.ex    # Azure API –∫–ª–∏–µ–Ω—Ç
‚îú‚îÄ‚îÄ invoice_extractor.ex        # –ü–∞—Ä—Å–≤–∞–Ω–µ –Ω–∞ Azure —Ä–µ–∑—É–ª—Ç–∞—Ç–∏
‚îî‚îÄ‚îÄ document_processor.ex       # –ì–ª–∞–≤–µ–Ω workflow orchestrator
```

### 3. Workflow - Upload –æ—Ç –±—Ä–∞—É–∑—ä—Ä–∞

```elixir
# 1. –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –∫–∞—á–≤–∞ PDF –ø—Ä–µ–∑ UI (/documents/upload)
# 2. PDF —Å–µ –∏–∑–ø—Ä–∞—â–∞ –¥–∏—Ä–µ–∫—Ç–Ω–æ –∫—ä–º Azure Form Recognizer
# 3. –†–µ–∑—É–ª—Ç–∞—Ç—ä—Ç —Å—ä–∑–¥–∞–≤–∞ ExtractedInvoice –∑–∞–ø–∏—Å–∏ —Å—ä—Å —Å—Ç–∞—Ç—É—Å "pending_review"

# 4. –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –ø—Ä–µ–≥–ª–µ–¥–∞ –∏ –æ–¥–æ–±—Ä—è–≤–∞ –≤ UI
alias CyberCore.DocumentProcessing

extracted_invoice = DocumentProcessing.get_extracted_invoice!(tenant_id, id)
DocumentProcessing.approve_extracted_invoice(extracted_invoice, user_id)

# 5. –°–ª–µ–¥ –æ–¥–æ–±—Ä–µ–Ω–∏–µ, —Å—ä–∑–¥–∞–≤–∞ —Å–µ —Ñ–∏–Ω–∞–ª–Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∞
# (—Ç–æ–≤–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞)
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. Azure Form Recognizer

#### –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ Resource

1. –í–ª–µ–∑—Ç–µ –≤ [Azure Portal](https://portal.azure.com)
2. Create a resource ‚Üí AI + Machine Learning ‚Üí Form Recognizer
3. –ò–∑–±–µ—Ä–µ—Ç–µ subscription –∏ resource group
4. –ò–∑–±–µ—Ä–µ—Ç–µ region (–ø—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–æ: West Europe)
5. –ò–∑–±–µ—Ä–µ—Ç–µ pricing tier (F0 –∑–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ, S0 –∑–∞ production)

#### –í–∑–µ–º–∞–Ω–µ –Ω–∞ Credentials

```bash
# Endpoint
https://YOUR_RESOURCE_NAME.cognitiveservices.azure.com/formrecognizer

# API Key (Keys and Endpoint ‚Üí Key 1)
YOUR_API_KEY_HERE
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ ERP —Å–∏—Å—Ç–µ–º–∞—Ç–∞

–û—Ç–≤–æ—Ä–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ –Ω–∞ —Å–∏—Å—Ç–µ–º–∞—Ç–∞:

```
http://localhost:4000/settings
```

–í —Å–µ–∫—Ü–∏—è—Ç–∞ **"AI –∏ Cloud –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏"** –ø–æ–ø—ä–ª–Ω–µ—Ç–µ:

- **Azure Endpoint**: `https://YOUR_RESOURCE_NAME.cognitiveservices.azure.com/`
- **API Key**: –í–∞—à–∏—è—Ç API key –æ—Ç Azure Portal

–ù–∞—Ç–∏—Å–Ω–µ—Ç–µ **"–ó–∞–ø–∞–∑–∏ Azure Form Recognizer"**

### 3. –ú–∏–≥—Ä–∞—Ü–∏–∏

```bash
mix ecto.migrate
```

## –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ

### –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ –ø—Ä–µ–∑ UI (–ø—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–æ)

#### 1. Upload –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∏

–û—Ç–≤–æ—Ä–µ—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞ –∑–∞ upload:
```
http://localhost:4000/documents/upload
```

–°—Ç—ä–ø–∫–∏:
1. –ò–∑–±–µ—Ä–µ—Ç–µ —Ç–∏–ø —Ñ–∞–∫—Ç—É—Ä–∞: **–ü–æ–∫—É–ø–∫–∏** –∏–ª–∏ **–ü—Ä–æ–¥–∞–∂–±–∏**
2. –ö–∞—á–µ—Ç–µ PDF —Ñ–∞–π–ª (drag & drop –∏–ª–∏ "–ò–∑–±–µ—Ä–µ—Ç–µ —Ñ–∞–π–ª–æ–≤–µ")
3. –ù–∞—Ç–∏—Å–Ω–µ—Ç–µ **"–û–±—Ä–∞–±–æ—Ç–∏ —Å AI"**
4. –ò–∑—á–∞–∫–∞–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫–∞—Ç–∞ (10-20 —Å–µ–∫—É–Ω–¥–∏)

#### 2. –ü—Ä–µ–≥–ª–µ–¥ –Ω–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏

–û—Ç–≤–æ—Ä–µ—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞ —Å —Ä–µ–∑—É–ª—Ç–∞—Ç–∏:
```
http://localhost:4000/extracted-invoices
```

–§—É–Ω–∫—Ü–∏–∏:
- –ü—Ä–µ–≥–ª–µ–¥ –Ω–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏ (–Ω–æ–º–µ—Ä, –¥–æ—Å—Ç–∞–≤—á–∏–∫, –¥–∞—Ç–∞, —Å—É–º–∞, –î–î–°)
- Confidence score - —Ç–æ—á–Ω–æ—Å—Ç –Ω–∞ –∏–∑–≤–ª–∏—á–∞–Ω–µ—Ç–æ
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞–ø—Ä–µ–¥/–Ω–∞–∑–∞–¥ –º–µ–∂–¥—É —Ñ–∞–∫—Ç—É—Ä–∏—Ç–µ
- –ë—É—Ç–æ–Ω–∏: **–°—ä—Ö—Ä–∞–Ω–∏** (–æ–¥–æ–±—Ä–∏), **–ó–∞–ø–∞–∑–∏ OCR**, **–ò–∑—Ç—Ä–∏–π** (–æ—Ç—Ö–≤—ä—Ä–ª–∏)

### –ü—Ä–æ–≥—Ä–∞–º–µ–Ω –¥–æ—Å—Ç—ä–ø

```elixir
alias CyberCore.DocumentProcessing

# –°–ø–∏—Å—ä–∫ –Ω–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏ —Ñ–∞–∫—Ç—É—Ä–∏, –æ—á–∞–∫–≤–∞—â–∏ –ø—Ä–µ–≥–ª–µ–¥
invoices = DocumentProcessing.list_extracted_invoices(
  tenant_id,
  filters: %{status: "pending_review"}
)

# –ü—Ä–µ–≥–ª–µ–¥ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∞
invoice = DocumentProcessing.get_extracted_invoice!(tenant_id, invoice_id)

# –û–¥–æ–±—Ä–µ–Ω–∏–µ
{:ok, approved} = DocumentProcessing.approve_extracted_invoice(invoice, user_id)

# –û—Ç—Ö–≤—ä—Ä–ª—è–Ω–µ
{:ok, rejected} = DocumentProcessing.reject_extracted_invoice(
  invoice,
  user_id,
  "VAT number is incorrect"
)
```

## UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ ‚úÖ

LiveView –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å–∞ **–∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞–Ω–∏ –∏ –≥–æ—Ç–æ–≤–∏ –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ**:

### 1. **Upload –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∏** ‚úÖ (`/documents/upload`)

**–î–æ—Å—Ç—ä–ø:** Sidebar ‚Üí AI –∏ Cloud ‚Üí ü§ñ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏:**
- ‚úÖ Drag & drop zone –∑–∞ PDF —Ñ–∞–∫—Ç—É—Ä–∏
- ‚úÖ –î–æ 10 —Ñ–∞–π–ª–∞ –µ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (max 10MB –≤—Å–µ–∫–∏)
- ‚úÖ Progress bar –ø—Ä–∏ –∫–∞—á–≤–∞–Ω–µ
- ‚úÖ –í–∏–∑—É–∞–ª–Ω–∞ –∏–Ω–¥–∏–∫–∞—Ü–∏—è –Ω–∞ –∫–∞—á–µ–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ
- ‚úÖ –ë—É—Ç–æ–Ω "–û–±—Ä–∞–±–æ—Ç–∏ —Å AI"
- ‚úÖ –†–µ–∑—É–ª—Ç–∞—Ç–∏ –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ Azure –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**URL:** http://localhost:4000/documents/upload

**–§–∞–π–ª:** `apps/cyber_web/lib/cyber_web/live/document_upload_live/index.ex`

### 2. **–ü—Ä–µ–≥–ª–µ–¥ –Ω–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏ –¥–∞–Ω–Ω–∏** ‚úÖ (`/extracted-invoices`)

**–î–æ—Å—Ç—ä–ø:** Sidebar ‚Üí AI –∏ Cloud ‚Üí ‚úì –ò–∑–≤–ª–µ—á–µ–Ω–∏ —Ñ–∞–∫—Ç—É—Ä–∏

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏:**
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ —Å –≤—Å–∏—á–∫–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏ —Ñ–∞–∫—Ç—É—Ä–∏
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ (–ò–∑—á–∞–∫–≤–∞—â–∏, –û–¥–æ–±—Ä–µ–Ω–∏, –û—Ç—Ö–≤—ä—Ä–ª–µ–Ω–∏)
- ‚úÖ Confidence score —Å —Ü–≤–µ—Ç–Ω–∞ –∏–Ω–¥–∏–∫–∞—Ü–∏—è:
  - –ó–µ–ª–µ–Ω–æ: ‚â•90% —Ç–æ—á–Ω–æ—Å—Ç
  - –ñ—ä–ª—Ç–æ: 70-89% —Ç–æ—á–Ω–æ—Å—Ç
  - –ß–µ—Ä–≤–µ–Ω–æ: <70% —Ç–æ—á–Ω–æ—Å—Ç
- ‚úÖ –°—Ç–∞—Ç—É—Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏
- ‚úÖ –ë—É—Ç–æ–Ω–∏ "–û–¥–æ–±—Ä–∏" / "–û—Ç—Ö–≤—ä—Ä–ª–∏"
- ‚úÖ –î–µ—Ç–∞–π–ª–∏: –Ω–æ–º–µ—Ä, –¥–æ—Å—Ç–∞–≤—á–∏–∫, –¥–∞—Ç–∞, —Å—É–º–∞

**URL:** http://localhost:4000/extracted-invoices

**–§–∞–π–ª:** `apps/cyber_web/lib/cyber_web/live/extracted_invoice_live/index.ex`

### 3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** ‚úÖ (`/settings`)

**–î–æ—Å—Ç—ä–ø:** Sidebar ‚Üí –°–∏—Å—Ç–µ–º–∞ ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí AI –∏ Cloud –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

**Azure Form Recognizer —Å–µ–∫—Ü–∏—è:**
- ‚úÖ Input –∑–∞ Azure Endpoint
- ‚úÖ Password –ø–æ–ª–µ –∑–∞ API Key
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞ —Å—Ç–∞—Ç—É—Å
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ –ó–∞–ø–∏—Å–≤–∞–Ω–µ –≤ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏

**–ó–∞–±–µ–ª–µ–∂–∫–∞:** PDF —Ñ–∞–π–ª–æ–≤–µ—Ç–µ —Å–µ –æ–±—Ä–∞–±–æ—Ç–≤–∞—Ç –¥–∏—Ä–µ–∫—Ç–Ω–æ –æ—Ç –±—Ä–∞—É–∑—ä—Ä–∞ –∫—ä–º Azure - –Ω–µ –µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ S3 storage.

**URL:** http://localhost:4000/settings

**–§–∞–π–ª:** `apps/cyber_web/lib/cyber_web/live/settings_live/index.ex`

### 4. **–ù–∞–≤–∏–≥–∞—Ü–∏—è** ‚úÖ

–ù–æ–≤–∞ —Å–µ–∫—Ü–∏—è –≤ sidebar:
```
AI –∏ Cloud
‚îú‚îÄ‚îÄ ü§ñ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏  (/documents/upload)
‚îî‚îÄ‚îÄ ‚úì  –ò–∑–≤–ª–µ—á–µ–Ω–∏ —Ñ–∞–∫—Ç—É—Ä–∏       (/extracted-invoices)
```

**–§–∞–π–ª:** `apps/cyber_web/lib/cyber_web/components/layouts/app.html.heex`

## –°–ª–µ–¥–≤–∞—â–∏ –°—Ç—ä–ø–∫–∏ (–û–ø—Ü–∏–æ–Ω–∞–ª–Ω–∏)

### TODO: –ö–æ–Ω–≤–µ—Ä—Å–∏—è –∫—ä–º —Ñ–∏–Ω–∞–ª–Ω–∏ —Ñ–∞–∫—Ç—É—Ä–∏

–°–ª–µ–¥ –æ–¥–æ–±—Ä–µ–Ω–∏–µ, —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ —Å—ä–∑–¥–∞–≤–∞ —Ñ–∏–Ω–∞–ª–Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∞:

```elixir
defmodule CyberCore.DocumentProcessing.InvoiceConverter do
  def convert_to_supplier_invoice(extracted_invoice) do
    # Map–≤–∞ ExtractedInvoice ‚Üí SupplierInvoice
    # –°—ä–∑–¥–∞–≤–∞ SupplierInvoice –∏ SupplierInvoiceLines
    # –ú–∞—Ä–∫–∏—Ä–∞ ExtractedInvoice –∫–∞—Ç–æ converted
  end

  def convert_to_sales_invoice(extracted_invoice) do
    # Map–≤–∞ ExtractedInvoice ‚Üí Invoice
    # –°—ä–∑–¥–∞–≤–∞ Invoice –∏ InvoiceLines
    # –ú–∞—Ä–∫–∏—Ä–∞ ExtractedInvoice –∫–∞—Ç–æ converted
  end
end
```

### TODO: Background Jobs

–ó–∞ production, –ø—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–æ –µ –æ–±—Ä–∞–±–æ—Ç–∫–∞—Ç–∞ –¥–∞ —Å–µ –ø—Ä–∞–≤–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ:

```elixir
# –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ Oban –∑–∞ job queue
defmodule CyberCore.Workers.ProcessDocumentWorker do
  use Oban.Worker

  @impl Oban.Worker
  def perform(%Oban.Job{args: %{"document_upload_id" => id}}) do
    document = DocumentProcessing.get_document_upload!(id)
    # Process document...
  end
end
```

## –¢–µ—Å—Ç–≤–∞–Ω–µ

### –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ Azure –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è—Ç–∞

```bash
iex -S mix

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Azure credentials
iex> alias CyberCore.DocumentProcessing.AzureFormRecognizer
iex> pdf = File.read!("test/fixtures/sample_invoice.pdf")
iex> {:ok, operation_url} = AzureFormRecognizer.analyze_invoice_from_binary(pdf)
iex> {:ok, result} = AzureFormRecognizer.poll_for_result(operation_url)
```

### –¢–µ—Å—Ç–≤–∞–Ω–µ –ø—Ä–µ–∑ UI

1. –û—Ç–≤–æ—Ä–µ—Ç–µ http://localhost:4000/documents/upload
2. –ö–∞—á–µ—Ç–µ —Ç–µ—Å—Ç–æ–≤–∞ PDF —Ñ–∞–∫—Ç—É—Ä–∞
3. –ù–∞—Ç–∏—Å–Ω–µ—Ç–µ "–û–±—Ä–∞–±–æ—Ç–∏ —Å AI"
4. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ –≤ http://localhost:4000/extracted-invoices

## –¶–µ–Ω–∏

### Azure Form Recognizer

- **F0 (Free)**: 500 —Å—Ç—Ä–∞–Ω–∏—Ü–∏/–º–µ—Å–µ—Ü
- **S0 (Standard)**:
  - 0-1M —Å—Ç—Ä–∞–Ω–∏—Ü–∏: $1.50 –∑–∞ 1000 —Å—Ç—Ä–∞–Ω–∏—Ü–∏
  - 1M-10M —Å—Ç—Ä–∞–Ω–∏—Ü–∏: $0.60 –∑–∞ 1000 —Å—Ç—Ä–∞–Ω–∏—Ü–∏

## –ü–æ–ª–µ–∑–Ω–∏ –õ–∏–Ω–∫–æ–≤–µ

- [Azure Form Recognizer Docs](https://learn.microsoft.com/en-us/azure/ai-services/document-intelligence/)
- [Azure Prebuilt Invoice Model](https://learn.microsoft.com/en-us/azure/ai-services/document-intelligence/concept-invoice)
